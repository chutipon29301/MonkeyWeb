$('#goback-btn').click(()=>{confirm('\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E22\u0E49\u0E2D\u0E19\u0E01\u0E25\u0E31\u0E1A?')&&(self.location='/tutorCommentStudent')});const addDateSelectOption=()=>{$('.dateSelect').empty();let a=moment(),b=a.clone().day(2).day()>=a.day()?a.clone().day(2):a.clone().day(9),c=a.clone().day(4).day()>=a.day()?a.clone().day(4):a.clone().day(11),d=a.clone().day(6).day()>=a.day()?a.clone().day(6):a.clone().day(13),e=a.clone().day(0).day()>=a.day()?a.clone().day(0):a.clone().day(7);b.hour(17).minute(0).second(0).millisecond(0),$('.dateSelect').append('<option value='+b.valueOf()+'>'+b.format('ddd DD/MM/YYYY (HH:mm)')+'</option>'),c.hour(17).minute(0).second(0).millisecond(0),$('.dateSelect').append('<option value='+c.valueOf()+'>'+c.format('ddd DD/MM/YYYY (HH:mm)')+'</option>');for(let f=0;4>f;f++)d.hour(8+2*f+(1<f)).minute(0).second(0).millisecond(0),$('.dateSelect').append('<option value='+d.valueOf()+'>'+d.format('ddd DD/MM/YYYY (HH:mm)')+'</option>');for(let f=0;4>f;f++)e.hour(8+2*f+(1<f)).minute(0).second(0).millisecond(0),$('.dateSelect').append('<option value='+e.valueOf()+'>'+e.format('ddd DD/MM/YYYY (HH:mm)')+'</option>')};addDateSelectOption();const addZoneSelectOption=()=>{$('#zoneSelector').empty(),$('#zoneSelector').append('<option value=0>- Please Select Zone -</option>');let a=$('#dateSelector').val();$.get('/hybridCommentZoneSelect',{date:new Date(parseInt(a))}).then(b=>{$('#zoneSelector').append(b)})};addZoneSelectOption(),$('#dateSelector').change(function(){addZoneSelectOption(),$('.student-list').remove()}),$('#addZoneBtn').click(()=>{$('#addZoneModal').modal('show')}),$('#addZoneSubmitBtn').click(function(){let a=$('#addZoneDate').val(),b=$('#addZoneName').val();if(0<b.length)try{$.post('v2/hybridZone/addZone',{date:new Date(parseInt(a)),zone:b}).then(c=>{console.log(c),addZoneSelectOption(),$('#addZoneModal').modal('hide')})}catch(c){alert('Server error please try again;')}else alert('Please input zone name!')}),$('#studentList').on('click','#addStdBtn',function(){$('#addStdModalBody').empty();let a=$('#zoneSelector').val();if('0'!=a){let b=$('#dateSelector').val();b=moment(parseInt(b));let c=moment(0);c.hour(b.hour()).day(b.day()),$.get('/hybridCommentAddStd',{date:c.valueOf()}).then(d=>{$('#addStdModalBody').append(d),$('#addStdModal').modal('show')})}else alert('Please select zone!')}),$('#addStdModalBody').on('click','.addStdModalBodyBtn',function(){$(this).toggleClass('btn-primary btn-light')}),$('#addStdSubmitBtn').click(function(){let a=$('.addStdModalBodyBtn'),b=[];for(let c=0;c<a.length;c++)$(a[c]).hasClass('btn-primary')&&b.push(a[c].name);if(0==b.length)alert('Please select some student.');else{let c=[],d=new Date(parseInt($('#dateSelector').val())),e=$('#zoneSelector').val();for(let f in b)c.push($.post('v2/hybridZone/addStudent',{date:d,zone:e,studentID:b[f]}));Promise.all(c).then(f=>{console.log(f),genStudentList(),$('#addStdModal').modal('hide')})}});const genStudentList=()=>{let a=$('#dateSelector').val(),b=$('#zoneSelector').val();$.get('/hybridCommentStudentList',{date:new Date(parseInt(a)),zone:b}).then(c=>{$('#studentList').empty(),$('#studentList').append(c)})};$('#zoneSelector').change(function(){'0'==this.value?$('.student-list').remove():genStudentList()}),$('.comment-btn').click(function(){$(this).toggleClass('select-btn nonselect-btn')}),$('#studentList').on('click','.student-list',function(){$('#studentList > .student-list').removeClass('active'),$(this).addClass('active'),$('.comment-btn').removeClass('select-btn'),$('.comment-btn').addClass('nonselect-btn')}),$('#addCommentBtn').click(function(){let b=$('.student-list.active').attr('name');if(!b)alert('Please select a student!');else if(0==$('.select-btn').length)alert('Please select some comment.');else{let c=[];for(let d=0;d<$('.select-btn').length;d++)c.push($.post('post/addStudentComment',{tutorID:'99000',studentID:b,message:$('.select-btn')[d].name}));Promise.all(c).then(()=>{$('#addCommentModal').modal('show'),setTimeout(()=>{$('#addCommentModal').modal('hide')},1e3),$('.comment-btn').removeClass('select-btn'),$('.comment-btn').addClass('nonselect-btn')})}}),$('#checkoutBtn').click(function(){let a=$('.student-list.active').attr('name'),b=new Date(parseInt($('#dateSelector').val())),c=$('#zoneSelector').val();$.post('v2/hybridZone/checkout',{studentID:a,date:b,zone:c}).then(d=>{console.log(d),genStudentList()})}),$('.addComment-btn').click(function(){let a=$('.student-list.active').attr('name');a&&$('#addOtherCommentModal').modal('show')}),$('#addCustomCommentSubmitBtn').click(function(){let a=$('.student-list.active').attr('name'),b=$('#customCommentTxt').val();if(0<b.length){$.post('post/addStudentComment',{tutorID:'99000',studentID:a,message:b}).then(()=>{$('#addOtherCommentModal').modal('hide'),$('#addCommentModal').modal('show'),setTimeout(()=>{$('#addCommentModal').modal('hide')},1e3)})}else alert('Please input some comment.')});