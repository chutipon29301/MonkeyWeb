let listAllTest=(()=>{var a=_asyncToGenerator(function*(){$("#testList").empty();let b=yield $.get("/courseTestList");$("#testList").append(b)});return function(){return a.apply(this,arguments)}})(),getTestDetail=(()=>{var a=_asyncToGenerator(function*(b){let c=yield $.get("/courseTestDetail",{testID:b});$("#testDetail").empty(),$("#testDetail").append(c)});return function(){return a.apply(this,arguments)}})(),getStudentInclass=(()=>{var a=_asyncToGenerator(function*(){let b=yield $.get("/courseTestOption");$("#courseSelect").empty(),$("#courseSelect").append(b)});return function(){return a.apply(this,arguments)}})(),generateStudentList=(()=>{var a=_asyncToGenerator(function*(){let b=sessionStorage.getItem("testScoreTestID"),c=$("#courseSelect").val(),d=yield $.get("/courseTestStudentList",{courseID:c,testID:b});$("#studentList").empty(),$("#studentList").append(d)});return function(){return a.apply(this,arguments)}})();function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(c,d){function e(f,g){try{var h=b[f](g),i=h.value}catch(j){return void d(j)}return h.done?void c(i):Promise.resolve(i).then(function(j){e("next",j)},function(j){e("throw",j)})}return e("next")})}}listAllTest(),$("#addNewTestBtn").click(function(){$("#addTestModal").modal("show")}),$("#addTestSubmitBtn").click(function(){0>=$("#addTestName").val().length?alert("Please input test name."):0>=$("#addTestScore").val().length?alert("Please input test max score."):0>=$("#addTestDate").val().length?alert("Please select test date."):confirm("Add new test?")&&$.post("v2/testScore/addTest",{testName:$("#addTestName").val(),maxScore:$("#addTestScore").val(),testDate:$("#addTestDate").val()}).then(a=>{console.log(a),listAllTest(),$("#addTestModal").modal("hide")})}),$("#testList").on("click","button",function(){sessionStorage.setItem("testScoreTestID",this.name.slice(5)),getTestDetail(this.name.slice(5)),$(this).hasClass("btn-outline-secondary")?($(".test-list-btn").removeClass("btn-secondary").addClass("btn-outline-secondary"),$(this).toggleClass("btn-secondary btn-outline-secondary")):$(this).toggleClass("btn-secondary btn-outline-secondary")});function getBlank(){$("#testDetail").empty(),$("#testDetail").append("<div class='col-12 text-center'><h1>Please select a test.</h1></div>")}function deleteTest(a){confirm("Are you sure to delete this test?")&&$.post("v2/testScore/deleteTest",{testID:a}).then(b=>{console.log(b),getBlank(),listAllTest()})}function addStudentScore(){getStudentInclass(),$("#studentList").empty(),$("#addStudentModal").modal("show")}function editStudent(a){sessionStorage.setItem("testScoreStudentID",a),$("#addStudentScoreModal").modal("show")}function removeStudent(a,b){confirm("Remove student from this test?")&&$.post("v2/testScore/removeStudent",{testID:a,students:[b]}).then(c=>{console.log(c),getTestDetail(a)})}$("#courseSelect").change(function(){"0"!=this.value&&generateStudentList()}),$("#studentList").on("click",".student-btn",function(){sessionStorage.setItem("testScoreStudentID",this.name),$("#addStudentScoreModal").modal("show")}),$("#addStudentScoreSubmitBtn").click(function(){let a=sessionStorage.getItem("testScoreTestID"),b=sessionStorage.getItem("testScoreStudentID"),c=$("#studentScore").val();""!=c&&$.post("v2/testScore/removeStudent",{testID:a,students:[b]}).then(d=>{console.log(d),$.post("v2/testScore/addStudent",{testID:a,students:{_id:b,score:c}}).then(()=>{generateStudentList(),getTestDetail(a),$("#addStudentScoreModal").modal("hide"),$("#studentScore").val("")})})});