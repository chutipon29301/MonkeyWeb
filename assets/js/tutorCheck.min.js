let checkIn=(()=>{var a=_asyncToGenerator(function*(){let b=getCookieDict();var c=yield $.post('post/v1/userInfo',{userID:b.monkeyWebUser});try{var d=yield $.post('/post/v1/tutorCheckIn',{tutorID:b.monkeyWebUser});if(log(d),d.err)11000===d.err.code&&($('#checkInResponse').empty(),$('#checkInResponse').append('<div class="alert alert-warning" role="alert">Already Check In</div>'),$('#checkInModal').modal('show'));else{var e=new Date(d.timestamp);$('#checkInResponse').empty(),$('#checkInResponse').append('<div class="alert alert-success" role="alert">'+c.firstname+' '+c.nickname+'<br>TimeStamp: '+moment(e).format('DD/MM/YY HH:mm:ss')+'</div>');let f=c.subPosition;void 0===f?yield lineNotify('MonkeyStaff','\n'+c.firstname+' '+c.nickname+'\nCheckin:'+moment(e).format('DD/MM/YY HH:mm:ss')):'trainee'===f.trim().toLowerCase()?yield lineNotify('MonkeyTrainee','\n'+c.firstname+' '+c.nickname+'\nCheckin:'+moment(e).format('DD/MM/YY HH:mm:ss')):'mel'===c.position?yield lineNotify('MonkeyTrainee','\n'+c.firstname+' '+c.nickname+'\nCheckin:'+moment(e).format('DD/MM/YY HH:mm:ss')):yield lineNotify('MonkeyStaff','\n'+c.firstname+' '+c.nickname+'\nCheckin:'+moment(e).format('DD/MM/YY HH:mm:ss')),$('#checkInModal').modal('show')}}catch(f){switch(f.status){case 401:$('#checkInResponse').empty(),$('#checkInResponse').append('<div class="alert alert-danger" role="alert">Unauthorize network</div>'),$('#checkInModal').modal('show');break;default:}}});return function(){return a.apply(this,arguments)}})(),checkOut=(()=>{var a=_asyncToGenerator(function*(){tableInfo=[],slot=[-1,-1,-1,-1,-1,-1],currentSlot=-1;let b=getCookieDict();yield name(b.monkeyWebUser);try{var d=yield $.post('/post/v1/getPendingTutorCheckIn',{tutorID:b.monkeyWebUser});d.err||(checkInDate=new Date(d.checkIn),checkOutDate=new Date,currentSlot=getSlot(checkInDate),$('#checkOutResponse').empty(),$('#checkOutResponse').append(checkOutButton()),$('.modal-btn').css({height:'15vh','padding-top':'1.5vh'}),$('.modal-btn').addClass('m-1'),$('#checkOutModal').modal('show'))}catch(e){switch(e.status){case 401:$('#checkOutResponse').empty(),$('#checkOutResponse').append('<div class="alert alert-danger" role="alert">Unauthorize network</div>'),$('#checkOutModal').modal('show');break;case 404:$('#checkOutResponse').empty(),$('#checkOutResponse').append('<div class="alert alert-danger" role="alert">Check in history not found</div>'),$('#checkOutModal').modal('show');break;default:}}});return function(){return a.apply(this,arguments)}})(),checkOutSubmit=(()=>{var a=_asyncToGenerator(function*(){let b=getCookieDict();var c=yield $.post('post/v1/userInfo',{userID:b.monkeyWebUser});try{yield $.post('/post/v1/tutorCheckOut',{tutorID:b.monkeyWebUser,slot0:slot[0],slot1:slot[1],slot2:slot[2],slot3:slot[3],slot4:slot[4],slot5:slot[5]});let e=c.subPosition;e===void 0?yield lineNotify('MonkeyStaff','\n'+c.firstname+' '+c.nickname+'\nCheckout:'+moment(checkOutDate).format('DD/MM/YY HH:mm:ss')):'trainee'===e.trim().toLowerCase()?yield lineNotify('MonkeyTrainee','\n'+c.firstname+' '+c.nickname+'\nCheckout:'+moment(checkOutDate).format('DD/MM/YY HH:mm:ss')):'mel'===c.position?yield lineNotify('MonkeyTrainee','\n'+c.firstname+' '+c.nickname+'\nCheckout:'+moment(checkOutDate).format('DD/MM/YY HH:mm:ss')):yield lineNotify('MonkeyStaff','\n'+c.firstname+' '+c.nickname+'\nCheckout:'+moment(checkOutDate).format('DD/MM/YY HH:mm:ss')),$('#checkOutSummaryModal').modal('hide')}catch(e){switch($('#checkOutSummaryModal').modal('hide'),e.status){case 401:$('#checkOutResponse').empty(),$('#checkOutResponse').append('<div class="alert alert-danger" role="alert">Unauthorize network</div>'),$('#checkOutModal').modal('show');break;case 404:$('#checkOutResponse').empty(),$('#checkOutResponse').append('<div class="alert alert-danger" role="alert">Check in history not found</div>'),$('#checkOutModal').modal('show');break;default:}}});return function(){return a.apply(this,arguments)}})();function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(c,d){function e(f,g){try{var h=b[f](g),j=h.value}catch(k){return void d(k)}return h.done?void c(j):Promise.resolve(j).then(function(k){e('next',k)},function(k){e('throw',k)})}return e('next')})}}const TOTAL_SLOT=6;var currentSlot=-1,slot=[-1,-1,-1,-1,-1,-1],tableInfo=[],checkInDate,checkOutDate,slotName=['Hybrid','Admin','Sheet','Com','Reading','Course'];function next(a){slot[currentSlot]=a,tableInfo.push({time:getSlotLabel(),detail:slotName[a]}),log(slot),currentSlot<getSlot(checkOutDate)?(currentSlot++,$('#checkOutResponse').empty(),$('#checkOutResponse').append(checkOutButton()),$('.modal-btn').css({height:'15vh','padding-top':'1.5vh'}),$('.modal-btn').addClass('m-1')):($('#checkOutModal').modal('hide'),$('#checkOutTable').empty(),$('#checkOutTable').append('<thead><td>Time</td><td>Detail</td></thead>'),$(function(){$.each(tableInfo,function(b,c){$('<tr>').append($('<td>').text(c.time),$('<td>').text(c.detail)).appendTo('#checkOutTable')})}),$('#checkOutSummaryModal').modal('show'))}function getSlot(a){var b=[10,13,15,17,19,24];for(let c=0;c<b.length;c++)if(a.getHours()<b[c])return c;return-1}function getSlotLabel(){var a=['08','10','13','15','17','19'],b=['10','13','15','17','19','24'];return currentSlot===getSlot(checkInDate)&&currentSlot===getSlot(checkOutDate)?moment(checkInDate).format('HH:mm:ss')+' - '+moment(checkOutDate).format('HH:mm:ss'):currentSlot===getSlot(checkInDate)?moment(checkInDate).format('HH:mm:ss')+' - '+b[currentSlot]+':00:00':currentSlot===getSlot(checkOutDate)?a[currentSlot]+':00:00 - '+moment(checkOutDate).format('HH:mm:ss'):a[currentSlot]+':00:00 - '+b[currentSlot]+':00:00'}function checkOutButton(){return'<div class="row" id="lable"><div class="col text-center">Time: '+getSlotLabel()+'</div></div><br><div class="row"><button class="col btn btn-primary modal-btn" onclick="next(0)">Hybrid</button><button class="col btn btn-primary modal-btn" onclick="next(1)">Admin</button><button class="col btn btn-primary modal-btn" onclick="next(2)">Sheet</button></div><div class="row"><button class="col btn btn-primary modal-btn" onclick="next(3)">Com</button><button class="col btn btn-primary modal-btn" onclick="next(4)">Reading</button><button class="col btn btn-primary modal-btn" onclick="next(5)">Course</button></div>'}